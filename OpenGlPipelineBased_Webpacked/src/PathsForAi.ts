import Vec3d from "./Vec3d"

let lines = `[['1','2'],['2','3'],['3','4'],['5','6'],['6','7'],['7','8'],['8','9'],['9','10'],['10','11'],['11','12'],['12','13'],['13','14'],['14','15'],['15','16'],['16','17'],['17','18'],['18','19'],['19','20'],['20','21'],['21','22'],['22','1']]`
let vertices1 = `[['82.415489','0.000000','-79.441940'],['89.431137','0.000000','95.876114'],['97.337280','0.000000','53.860672'],['97.734238','0.000000','82.792419'],['69.050774','0.000000','96.630936'],['46.154320','0.000000','78.766678'],['37.348000','0.000000','59.141151'],['32.819023','0.000000','14.606295'],['21.496613','0.000000','2.529047'],['11.432236','0.000000','5.548361'],['0.109825','0.000000','19.386871'],['-16.748009','0.000000','72.224831'],['-35.115486','0.000000','96.630936'],['-55.747467','0.000000','96.379333'],['-78.392281','0.000000','86.818176'],['-90.469551','0.000000','68.450699'],['-97.262993','0.000000','-3.257966'],['-98.017815','0.000000','-76.727890'],['-91.727577','0.000000','-90.566399'],['-75.876198','0.000000','-96.856636'],['39.360882','0.000000','-97.611458'],['-25.861801','0.000000','-98.075066']]`
let vertices2 = `[['74.647736','0.000000','-75.663033'],['81.663383','0.000000','88.948112'],['91.039101','0.000000','53.440792'],['90.176422','0.000000','78.173752'],['67.581200','0.000000','87.603539'],['50.563046','0.000000','74.357948'],['42.596481','0.000000','51.583336'],['35.548233','0.000000','6.208721'],['22.126431','0.000000','-1.879680'],['6.603630','0.000000','1.139635'],['-5.138659','0.000000','17.707355'],['-24.095886','0.000000','67.606163'],['-39.524212','0.000000','89.912880'],['-53.858013','0.000000','90.920914'],['-74.613373','0.000000','79.050423'],['-85.640945','0.000000','63.832031'],['-91.804573','0.000000','-5.357360'],['-90.250061','0.000000','-74.628494'],['-80.600792','0.000000','-86.367615'],['-65.169296','0.000000','-90.558456'],['39.570820','0.000000','-91.523216'],['-21.033195','0.000000','-91.147072']]` 
let vertices3 = `[['64.850563','0.000000','-72.863838'],['70.816513','0.000000','82.125084'],['83.691223','0.000000','53.615742'],['81.428947','0.000000','76.074356'],['60.758171','0.000000','73.957474'],['52.662441','0.000000','67.010071'],['48.194866','0.000000','46.859699'],['38.172474','0.000000','3.234579'],['23.700977','0.000000','-5.903518'],['-2.318793','0.000000','-1.134709'],['-16.860275','0.000000','20.681498'],['-33.543159','0.000000','65.856667'],['-48.621586','0.000000','81.515305'],['-59.631348','0.000000','78.149597'],['-75.138222','0.000000','66.454056'],['-79.692665','0.000000','38.464352'],['-85.681343','0.000000','-5.882208'],['-82.377335','0.000000','-70.954552'],['-70.103821','0.000000','-79.894485'],['-58.696159','0.000000','-80.236435'],['37.471424','0.000000','-81.551094'],['-19.983498','0.000000','-80.650101']]`

function createPath(vertices:string, lines:string){
    let vArray:string[] = []
    let lArray:string[] = []

    vertices = vertices.replaceAll('[', '')
    vertices = vertices.replaceAll(']', '')
    vertices = vertices.replaceAll(`'`, '')
    vArray = vertices.split(',')
    console.log(vArray)

    lines = lines.replaceAll('[', '')
    lines = lines.replaceAll(']', '')
    lines = lines.replaceAll(`'`, '')
    lArray = lines.split(',')
    console.log(lArray)

    let path:Vec3d[] = []
    for(let j=0; j<1; j++){
        let points:Vec3d[] = []
        for(let i=0; i<vArray.length; i+=3){
            let x = Math.round(Number(vArray[i])*2 + 20*j)
            let y = 10
            let z = Math.round(Number(vArray[i+2])*2 + 20*j)
            let point = new Vec3d(x,y,z)
            points.push(point)
        }

        for(let i=0; i<lArray.length; i+=2){
            let v1 = points[Number(lArray[i])-1]
            let v2 = points[Number(lArray[i+1])-1]
            path.push(v1)
            path.push(v2)
        }
    }

    path = path.filter((v, i) => {
        if(i+1 < path.length){
            if(path[i+1].x != v.x || path[i+1].z != v.z){
                return v
            }
        }
        else return v
    })
    lArray = lArray.filter((v, i) => {
        if(i+1 < lArray.length){
            if(lArray[i+1] != v){
                return v
            }
        }
        else return v
    })

    console.log(path)
    console.log(lArray, 'ordered points')

    return path
}

let correctPath = (path:Vec3d[]) => {
    let swp1 = path[1]
    let swp2 = path[2]
    path[1] = swp2
    path[2] = swp1

    swp1 = path[2]
    swp2 = path[3]
    path[2] = swp2
    path[3] = swp1    

    swp1 = path[20]
    swp2 = path[21]
    path[20] = swp2
    path[21] = swp1

    return path
}

let pathLeft = correctPath(createPath(vertices1, lines))
let pathMiddle = correctPath(createPath(vertices2, lines))
let pathRight = correctPath(createPath(vertices3, lines))

export { pathLeft, pathMiddle, pathRight }